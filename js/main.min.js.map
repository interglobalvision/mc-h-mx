{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","init","_this","this","$","window","resize","onResize","length","Camera","Parallax","document","ready","bindLangToggle","fixWidows","each","string","html","replace","bind","toggleClass","stellar","horizontalScrolling","verticalOffset","offset","top","positionProperty","hideDistantElements","hasClass","maxZoom","$cameraFeed","$xfader","$zoomfader","$projectThumbs","zoomed","isLocalHost","Cookies","get","animateFader","getUrlParameter","isLocal","setLocalStyles","css","value","val","animate","duration","easing","step","setOpacity","on","faderValue","parseInt","setZoom","zooming","mousemove","e","valX","pageX","innerWidth","valY","pageY","pageYOffset","innerHeight","setLocation","keydown","event","keyCode","imagesLoaded","background","remove","x","y","zoomValue","zoom","range","posX","posY","projectOpacity","camOpacity","set","easeInOutQuad","t","sParam","sParameterName","i","sPageURL","decodeURIComponent","location","search","substring","sURLVariables","split","undefined"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, document, Site, Cookies */\n\nSite = {\n  mobileThreshold: 601,\n  init: function() {\n    var _this = this;\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    if ($('#cam-feed').length) {\n      _this.Camera.init();\n    }\n\n    Site.Parallax.init();\n\n    $(document).ready(function () {\n\n      if ($('.lang-toggle').length) {\n        _this.bindLangToggle();\n      }\n\n    });\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n  bindLangToggle: function() {\n    $('.lang-toggle').bind('click', function() {\n      $('.page-content').toggleClass('active');\n    });\n  },\n};\n\nSite.Parallax = {\n  init: function() {\n\n    if ($('.project-overlay-content').length) {\n\n      $.stellar({\n        horizontalScrolling: false,\n        verticalOffset: $('.project-overlay-content').offset().top,\n        positionProperty: 'transform',\n        hideDistantElements: false,\n      });\n\n    } else if ($('body').hasClass('page-home')) {\n\n      $.stellar({\n        horizontalScrolling: false,\n        positionProperty: 'transform',\n        hideDistantElements: false,\n      });\n\n    }\n\n  },\n};\n\nSite.Camera = {\n  init: function() {\n    var _this = this;\n\n    _this.maxZoom = 1.7; // times. eg 2x\n\n    _this.$cameraFeed = $('#cam-feed');\n    _this.$xfader = $('#xfader');\n    _this.$zoomfader = $('#zoomfader');\n    _this.$projectThumbs = $('.home-project-item');\n\n    _this.zoomed = false;\n\n    _this.isLocalHost();\n    _this.bind();\n\n    if (Cookies.get('faderValue')) {\n      _this.animateFader(Cookies.get('faderValue'));\n    }\n  },\n\n  isLocalHost: function() {\n    var _this = this;\n\n    if (_this.getUrlParameter('isLocal')) {\n      _this.isLocal = true;\n\n      _this.setLocalStyles();\n    } else {\n      _this.isLocal = false;\n    }\n\n  },\n\n  setLocalStyles: function() {\n    var _this = this;\n\n    _this.$cameraFeed.css('background-image', 'url(http://mch.local)');\n  },\n\n  animateFader: function(value) {\n    var _this = this;\n\n    $({ val: 50 }).animate({ val: value }, {\n        duration: 300,\n        easing: 'linear',\n        step: function(val) {\n          _this.$xfader.val(val);\n          _this.setOpacity(val);\n        }\n    });\n  },\n\n  bind: function() {\n    var _this = this;\n\n    // Bind crossfader\n    _this.$xfader.on('input', function() {\n      var faderValue = $(this).val();\n      _this.setOpacity(faderValue);\n    });\n\n\n    // Bind zoomfader\n    _this.$zoomfader.on('input', function() {\n      var faderValue = parseInt($(this).val());\n      _this.setZoom(faderValue);\n    }).on('change', function() {\n      _this.zooming = false;\n    });\n\n    // Bind pointer position\n    $(document).mousemove(function(e) {\n      if(_this.zoomed && !_this.zooming) {\n        var valX = e.pageX / window.innerWidth;\n        var valY = (e.pageY - window.pageYOffset) / window.innerHeight;\n\n        _this.setLocation(valX,valY);\n      }\n\n    });\n\n    // Bind keyboard shortcuts\n    $(document).keydown(function(event) {\n      if (event.keyCode >= 49 && event.keyCode <= 57) {\n        var faderValue = ((event.keyCode - 48) * 10);\n        _this.$xfader.val(faderValue);\n        _this.setOpacity(faderValue);\n      }\n    });\n\n    _this.$cameraFeed.imagesLoaded( { background: true }, function() {\n      $('#cam-feed-loader').remove();\n    });\n  },\n\n  setLocation: function(x,y) {\n    var _this = this;\n\n    var zoomValue = _this.$zoomfader.val();\n    var zoom = ((zoomValue * 0.01 *(_this.maxZoom - 1) ) + 1);\n\n    var range =  1 - 1 / zoom;\n\n    var posX = ((x * range) - (range / 2)) * 100;\n    var posY = ((y * range) - (range / 2)) * 100;\n\n    _this.$cameraFeed.css('transform', 'scale(' + zoom + ') translate(' + posX + '%, ' + posY + '%)');\n  },\n\n  setOpacity: function(value) {\n    var _this = this;\n\n    var projectOpacity = value > 50 ? (100 - value) * 0.02 : 100;\n    var camOpacity = value < 51 ? value * 0.02 : 100;\n\n    _this.$cameraFeed.css('opacity', camOpacity);\n    _this.$projectThumbs.css('opacity', projectOpacity);\n\n    Cookies.set('faderValue', value);\n  },\n\n  setZoom: function(value) {\n    var _this = this;\n\n    _this.zooming = true;\n\n    var zoom = ((value * 0.01 *(_this.maxZoom - 1) ) + 1);\n\n    _this.$cameraFeed.css('transform', 'scale(' + zoom + ')');\n\n    if (value > 0) {\n      _this.zoomed = true;\n    } else {\n      _this.zoomed = false;\n    }\n\n  },\n\n  easeInOutQuad: function(t) {\n    return t<0.5 ? 2*t*t : -1+(4-2*t)*t;\n  },\n\n  getUrlParameter: function(sParam) {\n    var sPageURL = decodeURIComponent(window.location.search.substring(1));\n    var sURLVariables = sPageURL.split('&');\n    var sParameterName;\n    var i;\n\n    for (i = 0; i < sURLVariables.length; i++) {\n      sParameterName = sURLVariables[i].split('=');\n\n      if (sParameterName[0] === sParam) {\n        return sParameterName[1] === undefined ? true : sParameterName[1];\n      }\n    }\n  },\n\n};\n\nSite.init();\n"],"sourceRoot":"/source/"}